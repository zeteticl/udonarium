/* Generated by Opal 1.0.3 */
(function(Opal) {
  function $rb_lt(lhs, rhs) {
    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs < rhs : lhs['$<'](rhs);
  }
  function $rb_le(lhs, rhs) {
    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs <= rhs : lhs['$<='](rhs);
  }
  function $rb_gt(lhs, rhs) {
    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs > rhs : lhs['$>'](rhs);
  }
  function $rb_minus(lhs, rhs) {
    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs - rhs : lhs['$-'](rhs);
  }
  function $rb_plus(lhs, rhs) {
    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs + rhs : lhs['$+'](rhs);
  }
  function $rb_ge(lhs, rhs) {
    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs >= rhs : lhs['$>='](rhs);
  }
  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.const_get_qualified, $$ = Opal.const_get_relative, $breaker = Opal.breaker, $slice = Opal.slice, $klass = Opal.klass, $send = Opal.send, $truthy = Opal.truthy;

  Opal.add_stubs(['$setPrefixes', '$upcase', '$===', '$to_i', '$last_match', '$!=', '$empty?', '$!', '$==', '$rollAct', '$tableText', '$<', '$<=', '$>', '$-', '$roll', '$min', '$map', '$split', '$to_proc', '$+', '$>=', '$[]']);
  return (function($base, $super, $parent_nesting) {
    var self = $klass($base, $super, 'BladeOfArcana');

    var $nesting = [self].concat($parent_nesting), $BladeOfArcana_initialize$1, $BladeOfArcana_rollDiceCommand$2, $BladeOfArcana_rollAct$3, $BladeOfArcana_tableText$4;

    
    Opal.const_set($nesting[0], 'ID', "BladeOfArcana");
    Opal.const_set($nesting[0], 'NAME', "\u30D6\u30EC\u30A4\u30C9\u30FB\u30AA\u30D6\u30FB\u30A2\u30EB\u30AB\u30CA");
    Opal.const_set($nesting[0], 'SORT_KEY', "\u3075\u308C\u3044\u3068\u304A\u3075\u3042\u308B\u304B\u306A");
    Opal.const_set($nesting[0], 'HELP_MESSAGE', "" + "\u25A0\u884C\u70BA\u5224\u5B9A\u3000nA[m][Cx][Fy]\n" + "\u3000n\uFF1A\u30C0\u30A4\u30B9\u6570\u3000\u3000m\uFF1A\u5224\u5B9A\u5024(\u7701\u7565\u6642\u306F\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u5024\u3068\u540C\u3058)\n" + "\u3000x\uFF1A\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u5024(\u7701\u7565\u6642\u306F1)\u3000\u3000y\uFF1A\u30D5\u30A1\u30F3\u30D6\u30EB\u5024(\u7701\u7565\u6642\u306F20)\n" + "\u3000\u6CE8\uFF09[m]\u3001[Cx]\u3001[Fy]\u306F\u7701\u7565\u53EF\u80FD\u3002\n" + "\u3000\u3000\u4F8B\uFF093A12C4F15\u21923\u500B\u632F\u308A12\u4EE5\u4E0B\u3067\u6210\u529F\u3002C\u50244\u3001F\u5024\u306F15\u3002\n" + "\u3000\u3000\u4F8B\uFF093A12\u21923\u500B\u632F\u308A12\u4EE5\u4E0B\u3067\u6210\u529F\u3002C\u50241\u3001F\u5024\u306F20\u3002\n" + "\n" + "\u25A0\u5404\u7A2E\u8868\u3000(+\uFF1A\u51FA\u76EE2\uFF5E21\u306B\u5909\u66F4\u3000-\uFF1A\u51FA\u76EE0\uFF5E19\u306B\u5909\u66F4)\n" + "\u25CF\u30EA\u30A4\u30F3\u30AB\u30FC\u30CD\u30A4\u30B7\u30E7\u30F3\n" + "\u3000\u56E0\u7E01\u8868\u3000CTR[+/-]\u3000\u3000\u524D\u4E16\u9082\u9005\u8868\u3000DJV[-]\n" + "\u3000\u60AA\u5FB3\u30B7\u30FC\u30F3\u8868\u3000AKST[+/-]\n" + "\u25CFThe 3rd\uFF08\u7B2C\u4E09\u7248\uFF09\n" + "\u3000\u56E0\u7E01\u8868\u3000CT3[+/-]\n" + "\u3000\u6CE8\uFF09[]\u5185\u306F\u7701\u7565\u53EF\u80FD\u3002\n" + "\u3000\u3000\u4F8B\uFF09CTR\u2192\u56E0\u7E01\u8868\uFF08R\u7248\uFF09\u3092\u51FA\u76EE1\uFF5E20\u3067\u30ED\u30FC\u30EB\u3059\u308B\u3002\n" + "\u3000\u3000\u4F8B\uFF09CTR+\u2192\u56E0\u7E01\u8868\uFF08R\u7248\uFF09\u3092\u51FA\u76EE2\uFF5E21\u3067\u30ED\u30FC\u30EB\u3059\u308B\u3002\n");
    self.$setPrefixes(["\\d+A\\d*[CF]?\\d*[CF]?\\d*", "CT3[\\+\\-]?", "CTR[\\+\\-]?", "DJV\\-?", "AKST[\\+\\-]?"]);
    
    Opal.def(self, '$initialize', $BladeOfArcana_initialize$1 = function $$initialize() {
      var $iter = $BladeOfArcana_initialize$1.$$p, $yield = $iter || nil, self = this, $zuper = nil, $zuper_i = nil, $zuper_ii = nil;

      if ($iter) $BladeOfArcana_initialize$1.$$p = null;
      // Prepare super implicit arguments
      for($zuper_i = 0, $zuper_ii = arguments.length, $zuper = new Array($zuper_ii); $zuper_i < $zuper_ii; $zuper_i++) {
        $zuper[$zuper_i] = arguments[$zuper_i];
      }
      
      $send(self, Opal.find_super_dispatcher(self, 'initialize', $BladeOfArcana_initialize$1, false), $zuper, $iter);
      self.sendMode = 2;
      return (self.sortType = 1);
    }, $BladeOfArcana_initialize$1.$$arity = 0);
    
    Opal.def(self, '$rollDiceCommand', $BladeOfArcana_rollDiceCommand$2 = function $$rollDiceCommand(command) {
      var $a, $b, self = this, $case = nil, counts = nil, judgment = nil, option1 = nil, argument1 = nil, option2 = nil, argument2 = nil, critical = nil, fumble = nil, sign = nil, title = nil, table = nil;

      
      $case = command.$upcase();
      if (/^(\d+)A(\d*)([CF]?)(\d*)([CF]?)(\d*)$/['$===']($case)) {
      counts = $$($nesting, 'Regexp').$last_match(1).$to_i();
      judgment = $$($nesting, 'Regexp').$last_match(2).$to_i();
      option1 = $$($nesting, 'Regexp').$last_match(3);
      argument1 = $$($nesting, 'Regexp').$last_match(4);
      option2 = $$($nesting, 'Regexp').$last_match(5);
      argument2 = $$($nesting, 'Regexp').$last_match(6);
      if ($truthy(($truthy($a = ($truthy($b = option1['$empty?']()['$!='](argument1['$empty?']())) ? $b : option2['$empty?']()['$!='](argument2['$empty?']()))) ? $a : ($truthy($b = option2['$empty?']()['$!']()) ? option1['$=='](option2) : $b)))) {
        return nil};
      if (option1['$==']("C")) {
        
        critical = argument1.$to_i();
        fumble = argument2.$to_i();
      } else {
        
        critical = argument2.$to_i();
        fumble = argument1.$to_i();
      };
      return self.$rollAct(counts, judgment, critical, fumble);}
      else if (/^CT3([\+\-]?)$/['$===']($case)) {
      sign = $$($nesting, 'Regexp').$last_match(1);
      title = "\u56E0\u7E01\u8868(The 3rd)\u3000\u300EBoA3\u300FP292";
      table = ["\u3010\u4ED6\u751F\u3011", "\u3010\u5E2B\u5F1F\u3011", "\u3010\u5FD8\u5374\u3011", "\u3010\u5144\u59C9\u3011", "\u3010\u8CB8\u3057\u3011", "\u3010\u6155\u60C5\u3011", "\u3010\u4E3B\u5F93\u3011", "\u3010\u5F37\u6575\u3011", "\u3010\u79D8\u5BC6\u3011", "\u3010\u6069\u4EBA\u3011", "\u3010\u544A\u767A\u3011", "\u3010\u53CB\u4EBA\u3011", "\u3010\u4EC7\u6575\u3011", "\u3010\u7236\u6BCD\u3011", "\u3010\u501F\u308A\u3011", "\u3010\u4FE1\u983C\u3011", "\u3010\u5E7C\u5B50\u3011", "\u3010\u53D6\u5F15\u3011", "\u3010\u5730\u7E01\u3011", "\u3010\u540C\u5FD7\u3011", "\u3010\u4E0D\u5BE9\u3011", "\u3010\u81EA\u8EAB\u3011"];
      return self.$tableText(title, table, sign);}
      else if (/^CTR([\+\-]?)$/['$===']($case)) {
      sign = $$($nesting, 'Regexp').$last_match(1);
      title = "\u56E0\u7E01\u8868(\u30EA\u30A4\u30F3\u30AB\u30FC\u30CD\u30A4\u30B7\u30E7\u30F3)\u3000\u300EBAR\u300FP51\u3001299";
      table = ["\u3010\u4ED6\u751F\u3011", "\u3010\u5E2B\u5F1F\u3011", "\u3010\u5FD8\u5374\u3011", "\u3010\u5144\u59C9\u3011", "\u3010\u8CB8\u3057\u3011", "\u3010\u61A7\u61AC\u3011", "\u3010\u4E3B\u5F93\u3011", "\u3010\u5F37\u6575\u3011", "\u3010\u79D8\u5BC6\u3011", "\u3010\u6069\u4EBA\u3011", "\u3010\u53D6\u5F15\u3011", "\u3010\u53CB\u4EBA\u3011", "\u3010\u6028\u6575\u3011", "\u3010\u5F8C\u63F4\u3011", "\u3010\u501F\u308A\u3011", "\u3010\u4FE1\u983C\u3011", "\u3010\u5F1F\u59B9\u3011", "\u3010\u5546\u58F2\u3011", "\u3010\u5947\u7E01\u3011", "\u3010\u540C\u5FD7\u3011", "\u3010\u6709\u70BA\u3011", "\u3010\u81EA\u8EAB\u3011"];
      return self.$tableText(title, table, sign);}
      else if (/^DJV(\-?)$/['$===']($case)) {
      sign = $$($nesting, 'Regexp').$last_match(1);
      title = "\u524D\u4E16\u9082\u9005\u8868\uFF08\u30C7\u30B8\u30E3\u30D6\uFF09\u3000\u300EBAR\u300FP235";
      table = ["\u3010\u9BAE\u70C8\u306A\u98A8\u3011\n\u98A8\u306F\u61D0\u304B\u3057\u3044\u5302\u3044\u3092\u3001\u9999\u308A\u3092\u904B\u3093\u3067\u304F\u308B\u3002\u305D\u308C\u306F\u2026\u2026\u3002", "\u3010\u8584\u6697\u3044\u5F71\u3011\n\u307E\u308B\u3067\u6642\u304C\u6B62\u307E\u3063\u3066\u3057\u307E\u3063\u3066\u3044\u308B\u304B\u306E\u3088\u3046\u3060\u3002", "\u3010\u64CD\u308A\u306E\u7CF8\u3011\n\u305D\u308C\u306F\u3042\u306A\u305F\u3092\u5C0E\u304F\u8718\u86DB\u306E\u7CF8\u3002", "\u3010\u5929\u4E0A\u306E\u5149\u3011\n\u5049\u5927\u306A\u308B\u3082\u306E\u304C\u3082\u305F\u3089\u3059\u3001\u5929\u4E0A\u304B\u3089\u306E\u5FA1\u3057\u308B\u3057\u3002", "\u3010\u6E29\u3082\u308A\u3011\n\u6625\u306E\u3072\u306A\u305F\u306E\u3088\u3046\u306A\u6E29\u304B\u3055\u3092\u611F\u3058\u308B\u3002", "\u3010\u92ED\u3044\u30CA\u30A4\u30D5\u3011\n\u92ED\u3044\u30CA\u30A4\u30D5\u306E\u3088\u3046\u306A\u8996\u7DDA\u3092\u611F\u3058\u308B\u3002\u3053\u308C\u306F\u2026\u2026\u3002", "\u3010\u5171\u9CF4\u3011\n\u540C\u3058\u611F\u899A\u3092\u611F\u3058\u308B\u3001\u3075\u305F\u308A\u306F\u901A\u3058\u5408\u3063\u3066\u3044\u308B\u3002", "\u3010\u57CE\u58C1\u3011\n\u53B3\u3057\u304F\u9AD8\u3044\u57CE\u58C1\u306E\u3088\u3046\u306B\u91CD\u304F\u5805\u304F\u539A\u3044\u3002", "\u3010\u7815\u3051\u308B\u5668\u3011\n\u843D\u3061\u308C\u3070\u7815\u3051\u308B\u3002\u7815\u3051\u308C\u3070\u305D\u308C\u306F\u5668\u3067\u306F\u306A\u3044\u3002", "\u3010\u967D\u708E\u3011\n\u6C42\u3081\u308C\u3070\u63FA\u3089\u3044\u3067\u6D88\u3048\u308B\u3002", "\u3010\u7D42\u308F\u308A\u306A\u304D\u5186\u74B0\u3011\n\u305D\u308C\u306F\u3042\u306A\u305F\u3092\u6349\u3048\u5DE1\u308B\u8F2A\u5EFB\u306E\u8F2A\u3002", "\u3010\u5929\u79E4\u3011\n\u63FA\u308C\u308B\u30D0\u30E9\u30F3\u30B9\u3001\u63FA\u308C\u7D9A\u3051\u308B\u5B89\u5B9A\u3002", "\u3010\u6D41\u308C\u308B\u6C34\u3011\n\u3072\u3068\u3064\u6240\u306B\u3068\u3069\u307E\u3089\u305A\u3001\u59FF\u3092\u56FA\u3081\u308B\u3053\u3068\u306F\u306A\u3044", "\u3010\u5149\u308B\u5203\u3011\n\u92ED\u304F\u5149\u308B\u5203\u306E\u3088\u3046\u306A\u3001\u92ED\u3044\u307E\u306A\u3056\u3057\u3002", "\u3010\u60AA\u9B54\u3011\n\u3042\u307E\u308A\u306B\u3082\u5371\u967A\u306A\u9B45\u529B\u3001\u305D\u308C\u306F\u60AA\u9B54\u7684\u3060\u3063\u305F\u3002", "\u3010\u7259\u3011\n\u7372\u7269\u3092\u5F15\u304D\u88C2\u304F\u92ED\u304F\u9577\u3044\u3001\u7259\u3002", "\u3010\u8F1D\u304F\u661F\u3011\n\u661F\u306F\u6697\u304F\u5C0F\u3055\u3044\u3002\u3060\u304C\u305D\u3053\u306B\u8F1D\u304F\u3002", "\u3010\u51B4\u3048\u6E21\u308B\u6708\u5149\u3011\n\u51B7\u305F\u3055\u3068\u5B89\u3089\u304B\u3055\u304C\u540C\u5C45\u3057\u3066\u3044\u308B\u3002", "\u3010\u7167\u308A\u3064\u3051\u308B\u592A\u967D\u3011\n\u6691\u3044\u3002", "\u3010\u71C3\u3048\u3055\u304B\u308B\u708E\u3011\n\u708E\u306F\u3059\u3079\u3066\u3092\u7834\u58CA\u3057\u3001\u3059\u3079\u3066\u3092\u6EC5\u307C\u3059\u3002", "\u3010\u4E16\u754C\u3011\n\u3059\u3079\u3066\u306F\u3053\u306E\u4E16\u754C\u306E\u4E2D\u3067\u8D77\u3053\u308A\u3001\u7D42\u308F\u308B\u3002", "\u3010\u306A\u3057\u3011"];
      return self.$tableText(title, table, sign);}
      else if (/^AKST([\+\-]?)$/['$===']($case)) {
      sign = $$($nesting, 'Regexp').$last_match(1);
      title = "\u60AA\u5FB3\u30B7\u30FC\u30F3\u8868\u3000\u300EGoV\u300FP16\u3001164";
      table = ["\u25BC\u30A6\u30A7\u30F3\u30C8\u30B9\uFF0F\u6B62\u307E\u306A\u3044\u98A8\n\u3010\u884C\u52D5\u3011\u6BBA\u622E\u8005\u306E\u72C2\u6C17\u306B\u5F53\u3066\u3089\u308C\u305F\u306E\u304B\u3001\u901A\u308A\u9B54\u7684\u6BBA\u4EBA\u8005\u304C\u73FE\u308C\u308B\u3002\u5207\u308A\u88C2\u304B\u308C\u305F\u4EBA\u3005\u306E\u60B2\u9CF4\u304C\u97FF\u304D\u6E21\u308B\u3002", "\u25BC\u30A8\u30D5\u30A7\u30AF\u30C8\u30B9\uFF0F\u539F\u521D\u306E\u529B\n\u3010\u884C\u52D5\u3011\u6BBA\u622E\u8005\u306E\u914D\u4E0B\u304C\u7121\u6CD5\u3092\u50CD\u304F\u3002\u5E97\u5148\u3067\u91D1\u54C1\u3092\u8981\u6C42\u3057\u305F\u308A\u3001\u66B4\u529B\u3092\u632F\u308B\u3063\u305F\u308A\u3057\u3066\u3044\u308B\u3002", "\u25BC\u30AF\u30EC\u30A2\u30FC\u30BF\uFF0F\u5080\u5121\u4EBA\u5F62\u306E\u738B\n\u3010\u884C\u52D5\u3011\u6BBA\u622E\u8005\u306E\u914D\u4E0B\u304C\u4EBA\u3005\u306E\u884C\u52D5\u3092\u76E3\u8996\u3057\u3066\u3044\u308B\u3002\u9055\u53CD\u3057\u305F\u8005\u306B\u306F\u5373\u5EA7\u306B\u7F70\u304C\u4E0E\u3048\u3089\u308C\u308B\u3002", "\u25BC\u30DE\u30FC\u30C6\u30EB\uFF0F\u751F\u3051\u308B\u795E\n\u3010\u884C\u52D5\u3011\u6BBA\u622E\u8005\u306E\u914D\u4E0B\u304C\u4EBA\u3005\u306B\u6BBA\u622E\u8005\u3078\u306E\u4FE1\u4EF0\u3092\u544A\u767D\u3057\u3001\u5FE0\u8AA0\u3092\u5BA3\u8A93\u3059\u308B\u3088\u3046\u306B\u5F37\u8981\u3057\u3066\u3044\u308B\u3002", "\u25BC\u30B3\u30ED\u30CA\uFF0F\u7C12\u596A\u8005\n\u3010\u884C\u52D5\u3011\u5606\u304D\u60B2\u3057\u3093\u3067\u3044\u308B\u8005\u304C\u3044\u308B\u3002\u6BBA\u622E\u8005\u306B\u3088\u3063\u3066\u3001\u8CA1\u7523\u3001\u5730\u4F4D\u3001\u5BB6\u65CF\u3042\u308B\u3044\u306F\u3001\u604B\u4EBA\u3092\u596A\u3044\u53D6\u3089\u308C\u305F\u3068\u3044\u3046\u3002", "\u25BC\u30D5\u30A3\u30CB\u30B9\uFF0F\u6C38\u9060\u306E\u4EBA\n\u3010\u884C\u52D5\u3011\u602A\u7269\u304C\u4EBA\u3005\u3092\u8650\u6BBA\u3057\u3066\u3044\u308B\u3002\u3053\u306E\u5730\u306B\u306F\u4EBA\u9593\u304C\u591A\u3059\u304E\u308B\u306E\u3060\u3068\u3044\u3046\u3002\u305D\u308C\u304C\u5F7C\u3089\u306E\u4E3B\u306E\u6C7A\u5B9A\u3060\u3002", "\u25BC\u30A8\u30EB\u30B9\uFF0F\u7121\u79C1\u306A\u308B\u611B\n\u3010\u884C\u52D5\u3011\u6BBA\u622E\u8005\u306E\u914D\u4E0B\u304C\u7565\u596A\u3092\u50CD\u3044\u3066\u3044\u308B\u3002\u3069\u3046\u3084\u3089\u3001\u6BBA\u622E\u8005\u306B\u732E\u4E0A\u3059\u308B\u3082\u306E\u3092\u4E89\u3063\u3066\u3044\u308B\u3088\u3046\u3060\u3002", "\u25BC\u30A2\u30C0\u30DE\u30B9\uFF0F\u4E07\u7269\u306E\u4FDD\u8B77\u8005\n\u3010\u884C\u52D5\u3011\u53CD\u9006\u8005\u3068\u540D\u6307\u3057\u3055\u308C\u308B\u3002\u4EBA\u3005\u306F\u541B\u305F\u3061\u306B\u63A5\u89E6\u3057\u3088\u3046\u3068\u3057\u306A\u3044\u3002\u60C5\u5831\u3092\u96C6\u3081\u308B\u306B\u3082\u82E6\u52B4\u3057\u305D\u3046\u3060\u3002", "\u25BC\u30A2\u30EB\u30C9\u30FC\u30EB\uFF0F\u7D42\u308F\u308A\u306A\u304D\u6226\u3044\n\u3010\u884C\u52D5\u3011\u306A\u3089\u305A\u8005\u306E\u96C6\u56E3\u304C\u4EBA\u3005\u3092\u8972\u3063\u3066\u3044\u308B\u3002\u529B\u3092\u793A\u3055\u306A\u3051\u308C\u3070\u5207\u308A\u6368\u3066\u3089\u308C\u308B\u306E\u306F\u5F7C\u3089\u306A\u306E\u3060\u3002", "\u25BC\u30D5\u30A1\u30F3\u30BF\u30B9\u30DE\uFF0F\u8B00\u7565\u306E\u6E26\n\u3010\u884C\u52D5\u3011\u4EBA\u3005\u306F\u541B\u3092\u898B\u308B\u306A\u308A\u9003\u3052\u51FA\u3057\u305F\u3002\u3069\u3046\u3084\u3089\u6050\u308D\u3057\u3044\u6BBA\u4EBA\u8005\u3060\u3068\u601D\u308F\u308C\u3066\u3044\u308B\u3088\u3046\u3060\u3002", "\u25BC\u30A2\u30AF\u30B7\u30B9\uFF0F\u771F\u7406\u306E\u63A2\u7A76\u8005\n\u3010\u884C\u52D5\u3011\u6BBA\u622E\u8005\u306E\u914D\u4E0B\u306E\u624B\u306B\u3088\u3063\u3066\u3001\u4EBA\u3005\u304C\u9023\u308C\u53BB\u3089\u308C\u3066\u3044\u308B\u3002\u8AB0\u3072\u3068\u308A\u3082\u3069\u3063\u3066\u3053\u306A\u3044\u3002", "\u25BC\u30EC\u30AF\u30B9\uFF0F\u6355\u7E1B\u8005\n\u3010\u884C\u52D5\u3011\u6BBA\u622E\u8005\u3078\u306E\u6050\u6016\u306B\u99C6\u3089\u308C\u305F\u4EBA\u3005\u306F\u305D\u306E\u547D\u4EE4\u306B\u3057\u305F\u304C\u3063\u3066\u5F92\u515A\u3092\u7D44\u307F\u3001PC\u305F\u3061\u3092\u635C\u7D22\u3057\u3066\u3044\u308B\u3002", "\u25BC\u30A2\u30AF\u30A2\uFF0F\u6FB1\u3093\u3060\u6C34\n\u3010\u884C\u52D5\u3011\u4EBA\u3005\u306F\u7363\u306E\u3088\u3046\u306B\u751F\u304D\u3066\u3044\u308B\u3002\u8A00\u8449\u306F\u901A\u3058\u306A\u3044\u3002\u6709\u52B9\u306A\u306E\u306F\u529B\u3001\u66B4\u529B\u3060\u3051\u3060\u3002", "\u25BC\u30B0\u30E9\u30C7\u30A3\u30A6\u30B9\uFF0F\u6697\u304D\u6B7B\u306E\u5203\n\u3010\u884C\u52D5\u3011\u6BBA\u622E\u8005\u3068\u305D\u306E\u914D\u4E0B\u306B\u3088\u3063\u3066\u8650\u6BBA\u304C\u884C\u306A\u308F\u308C\u3066\u3044\u308B\u3002\u898B\u6E21\u3059\u9650\u308A\u3001\u6B7B\u8005\u3070\u304B\u308A\u3060\u3002", "\u25BC\u30A2\u30F3\u30B0\u30EB\u30B9\uFF0F\u7D14\u767D\u306E\u6050\u6016\n\u3010\u884C\u52D5\u3011\u904A\u3073\u3068\u3057\u3066\u4EBA\u9593\u72E9\u308A\u304C\u884C\u306A\u308F\u308C\u3066\u3044\u308B\u3002\u4EBA\u3005\u306F\u9003\u3052\u60D1\u3044\u3001\u6BBA\u622E\u8005\u306F\u6109\u60A6\u306B\u7B11\u3046\u3002", "\u25BC\u30C7\u30A3\u30A2\u30DC\u30EB\u30B9\uFF0F\u60AA\u9B54\u306E\u56C1\u304D\n\u3010\u884C\u52D5\u3011\u6BBA\u622E\u8005\u306F\u5C11\u5E74\u5C11\u5973\u3092\u53EC\u3057\u4E0A\u3052\u3066\u3044\u308B\u3002\u53EC\u3057\u4E0A\u3052\u3089\u308C\u305F\u8005\u305F\u3061\u306F\u97F3\u4FE1\u4E0D\u901A\u3068\u306A\u3063\u3066\u3057\u307E\u3046\u3002", "\u25BC\u30D5\u30EB\u30AD\u30D5\u30A7\u30EB\uFF0F\u88CF\u5207\u308A\u8005\n\u3010\u884C\u52D5\u3011\u4EBA\u3005\u306F\u731C\u7591\u306E\u76EE\u3067\u541B\u3092\u898B\u308B\u3002\u5618\u3092\u5410\u304F\u306E\u304C\u666E\u901A\u306E\u5834\u6240\u3067\u771F\u5B9F\u3092\u898B\u3044\u3060\u305B\u308B\u3060\u308D\u3046\u304B\u3002", "\u25BC\u30B9\u30C6\u30E9\uFF0F\u7834\u6EC5\u3078\u306E\u611B\n\u3010\u884C\u52D5\u3011\u8857\u3084\u6751\u843D\u304C\u7834\u58CA\u3055\u308C\u3066\u3044\u308B\u3002\u713C\u3051\u91CE\u539F\u306E\u4E2D\u3001\u4EBA\u3005\u306F\u529B\u306A\u304F\u3046\u305A\u304F\u307E\u308B\u3002\u3053\u3053\u306B\u306F\u7D76\u671B\u3060\u3051\u304C\u3042\u3063\u305F\u3002", "\u25BC\u30EB\u30CA\uFF0F\u596A\u3046\u8005\n\u3010\u884C\u52D5\u3011\u541B\u305F\u3061\u306E\u76EE\u306E\u524D\u306B\u7565\u596A\u304C\u7E70\u308A\u8FD4\u3055\u308C\u308B\u3002\u7565\u596A\u306E\u305F\u3081\u306B\u7565\u596A\u3092\u884C\u306A\u3046\u6BBA\u622E\u8005\u306E\u914D\u4E0B\u305F\u3061\u3002", "\u25BC\u30C7\u30AF\u30B9\u30C8\u30E9\uFF0F\u90AA\u60AA\u306A\u6280\n\u3010\u884C\u52D5\u3011\u6BBA\u622E\u8005\u306B\u3088\u308B\u975E\u9053\u306A\u4EBA\u4F53\u5B9F\u9A13\u304C\u7E70\u308A\u8FD4\u3055\u308C\u3066\u3044\u308B\u3002\u305D\u306E\u305F\u3081\u306E\u5B9F\u9A13\u6750\u6599\u304C\u96C6\u3081\u3089\u308C\u3066\u3044\u308B\u3002", "\u25BC\u30A4\u30B0\u30CB\u30B9\uFF0F\u6839\u6E90\u305F\u308B\u708E\n\u3010\u884C\u52D5\u3011\u8857\u3084\u96C6\u843D\u3001\u3042\u308B\u3044\u306F\u5E97\u8217\u3084\u4F4F\u5B85\u304C\u713C\u304D\u8A0E\u3061\u306B\u5408\u3046\u3002\u4EBA\u3005\u306F\u4E92\u3044\u306B\u9665\u308C\u3001\u78D4\u5211\u304C\u884C\u306A\u308F\u308C\u3066\u3044\u308B\u3002", "\u25BC\u30AA\u30FC\u30D3\u30B9\uFF0F\u95C7\u306E\u9396\n\u3010\u884C\u52D5\u3011\u4E16\u754C\u306E\u5B8C\u5168\u306A\u308B\u7834\u6EC5\u3001\u4EBA\u985E\u306E\u7D76\u6EC5\u3001\u7121\u4F5C\u70BA\u3067\u5E83\u7BC4\u56F2\u306A\u8650\u6BBA\u304C\u884C\u306A\u308F\u308C\u308B\u3002"];
      return self.$tableText(title, table, sign);};
      return nil;
    }, $BladeOfArcana_rollDiceCommand$2.$$arity = 1);
    
    Opal.def(self, '$rollAct', $BladeOfArcana_rollAct$3 = function $$rollAct(counts, judgment, critical, fumble) {
      var $a, $b, self = this, value = nil, string = nil, text = nil;

      
      
      if (judgment == null) {
        judgment = 0;
      };
      
      if (critical == null) {
        critical = 0;
      };
      
      if (fumble == null) {
        fumble = 0;
      };
      if ($truthy($rb_lt(critical, 1))) {
        critical = 1};
      if ($truthy($rb_le(judgment, 0))) {
        judgment = critical
      } else if ($truthy($rb_gt(critical, judgment))) {
        critical = judgment};
      if ($truthy($rb_le(fumble, 0))) {
        fumble = 20};
      if ($truthy($rb_le(counts, 0))) {
        
        counts = 1;
        fumble = $rb_minus(fumble, 5);};
      if ($truthy($rb_lt(fumble, 2))) {
        fumble = 2
      } else if ($truthy($rb_gt(fumble, 20))) {
        fumble = 20};
      $b = self.$roll(counts, 20, 1), $a = Opal.to_ary($b), (value = ($a[0] == null ? nil : $a[0])), (string = ($a[1] == null ? nil : $a[1])), $b;
      text = "" + "(" + (counts) + "A" + (judgment) + "C" + (critical) + "F" + (fumble) + ") \uFF1E " + (string) + " \uFF1E ";
      if (counts['$=='](1)) {
      } else {
        
        value = $send(string.$split(","), 'map', [], "to_i".$to_proc()).$min();
        text = $rb_plus(text, "" + (value) + " \uFF1E ");
      };
      if ($truthy($rb_ge(value, fumble))) {
        text = $rb_plus(text, "\u30D5\u30A1\u30F3\u30D6\u30EB")
      } else if ($truthy($rb_le(value, critical))) {
        text = $rb_plus(text, "\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB")
      } else if ($truthy($rb_gt(value, judgment))) {
        text = $rb_plus(text, "\u5931\u6557")
      } else {
        text = $rb_plus(text, "\u6210\u529F")
      };
      return text;
    }, $BladeOfArcana_rollAct$3.$$arity = -2);
    return (Opal.def(self, '$tableText', $BladeOfArcana_tableText$4 = function $$tableText(title, table, sign) {
      var $a, $b, self = this, number = nil, index = nil, text = nil;

      
      
      if (sign == null) {
        sign = "";
      };
      $b = self.$roll(1, 20), $a = Opal.to_ary($b), (number = ($a[0] == null ? nil : $a[0])), $b;
      index = number;
      if (sign['$==']("+")) {
        index = $rb_plus(index, 1)
      } else if (sign['$==']("-")) {
        index = $rb_minus(index, 1)};
      text = "" + (title) + " \uFF1E " + (index);
      if ($truthy(sign['$empty?']())) {
      } else {
        text = $rb_plus(text, "" + "[" + (number) + (sign) + "1]")
      };
      return $rb_plus($rb_plus(text, " \uFF1E "), table['$[]'](index));
    }, $BladeOfArcana_tableText$4.$$arity = -3), nil) && 'tableText';
  })($nesting[0], $$($nesting, 'DiceBot'), $nesting)
})(Opal);
