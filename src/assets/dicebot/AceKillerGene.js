/* Generated by Opal 1.0.3 */
(function(Opal) {
  function $rb_divide(lhs, rhs) {
    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs / rhs : lhs['$/'](rhs);
  }
  function $rb_lt(lhs, rhs) {
    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs < rhs : lhs['$<'](rhs);
  }
  function $rb_le(lhs, rhs) {
    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs <= rhs : lhs['$<='](rhs);
  }
  function $rb_ge(lhs, rhs) {
    return (typeof(lhs) === 'number' && typeof(rhs) === 'number') ? lhs >= rhs : lhs['$>='](rhs);
  }
  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.const_get_qualified, $$ = Opal.const_get_relative, $breaker = Opal.breaker, $slice = Opal.slice, $klass = Opal.klass, $truthy = Opal.truthy, $hash2 = Opal.hash2;

  Opal.add_stubs(['$setPrefixes', '$===', '$to_i', '$last_match', '$get_critical_border', '$check_roll_repeat_attack', '$look_up_damage_chart', '$nil?', '$max', '$floor', '$/', '$check_roll', '$<', '$roll', '$get_check_result', '$<=', '$>=', '$get_damage_table_info_by_type', '$get_table_by_number', '$[]', '$freeze']);
  return (function($base, $super, $parent_nesting) {
    var self = $klass($base, $super, 'GardenOrder');

    var $nesting = [self].concat($parent_nesting), $GardenOrder_rollDiceCommand$1, $GardenOrder_get_critical_border$2, $GardenOrder_check_roll_repeat_attack$3, $GardenOrder_check_roll$4, $GardenOrder_get_check_result$5, $GardenOrder_look_up_damage_chart$6, $GardenOrder_get_damage_table_info_by_type$7;

    
    Opal.const_set($nesting[0], 'ID', "GardenOrder");
    Opal.const_set($nesting[0], 'NAME', "\u30AC\u30FC\u30C7\u30F3\u30AA\u30FC\u30C0\u30FC");
    Opal.const_set($nesting[0], 'SORT_KEY', "\u304B\u3042\u3066\u3093\u304A\u304A\u305F\u3042");
    Opal.const_set($nesting[0], 'HELP_MESSAGE', "" + "\u30FB\u57FA\u672C\u5224\u5B9A\n" + "\u3000GOx/y@z\u3000x\uFF1A\u6210\u529F\u7387\u3001y\uFF1A\u9023\u7D9A\u653B\u6483\u56DE\u6570\uFF08\u7701\u7565\u53EF\uFF09\u3001z\uFF1A\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u5024\uFF08\u7701\u7565\u53EF\uFF09\n" + "\u3000\uFF08\u9023\u7D9A\u653B\u6483\u3067\u306F1\u56DE\u306E\u5224\u5B9A\u306E\u307F\u304C\u5B9F\u65BD\u3055\u308C\u307E\u3059\uFF09\n" + "\u3000\u4F8B\uFF09GO55\u3000GO100/2\u3000GO70@10\u3000GO155/3@44\n" + "\u30FB\u8CA0\u50B7\u8868\n" + "\u3000DCxxy\n" + "\u3000xx\uFF1A\u5C5E\u6027\uFF08\u5207\u65AD\uFF1ASL\uFF0C\u9283\u5F3E\uFF1ABL\uFF0C\u885D\u6483\uFF1AIM\uFF0C\u707C\u71B1\uFF1ABR\uFF0C\u51B7\u5374\uFF1ARF\uFF0C\u96FB\u6483\uFF1AEL\uFF09\n" + "\u3000y\uFF1A\u30C0\u30E1\u30FC\u30B8\n" + "\u3000\u4F8B\uFF09DCSL7\u3000DCEL22\n");
    self.$setPrefixes(["GO(\\-?\\d+)(\\/\\d+)?(@\\d+)?", "DC(SL|BL|IM|BR|RF|EL).+"]);
    
    Opal.def(self, '$rollDiceCommand', $GardenOrder_rollDiceCommand$1 = function $$rollDiceCommand(command) {
      var $a, self = this, $case = nil, success_rate = nil, repeat_count = nil, critical_border_text = nil, critical_border = nil, type = nil, damage_value = nil;

      
      $case = command;
      if (/GO(\-?\d+)(\/(\d+))?(@(\d+))?/i['$===']($case)) {
      success_rate = $$($nesting, 'Regexp').$last_match(1).$to_i();
      repeat_count = ($truthy($a = $$($nesting, 'Regexp').$last_match(3)) ? $a : 1).$to_i();
      critical_border_text = $$($nesting, 'Regexp').$last_match(5);
      critical_border = self.$get_critical_border(critical_border_text, success_rate);
      return self.$check_roll_repeat_attack(success_rate, repeat_count, critical_border);}
      else if (/^DC(SL|BL|IM|BR|RF|EL)(\d+)/i['$===']($case)) {
      type = $$($nesting, 'Regexp').$last_match(1);
      damage_value = $$($nesting, 'Regexp').$last_match(2).$to_i();
      return self.$look_up_damage_chart(type, damage_value);};
      return nil;
    }, $GardenOrder_rollDiceCommand$1.$$arity = 1);
    
    Opal.def(self, '$get_critical_border', $GardenOrder_get_critical_border$2 = function $$get_critical_border(critical_border_text, success_rate) {
      var self = this, critical_border = nil;

      
      if ($truthy(critical_border_text['$nil?']())) {
      } else {
        return critical_border_text.$to_i()
      };
      critical_border = [$rb_divide(success_rate, 5).$floor(), 1].$max();
      return critical_border;
    }, $GardenOrder_get_critical_border$2.$$arity = 2);
    
    Opal.def(self, '$check_roll_repeat_attack', $GardenOrder_check_roll_repeat_attack$3 = function $$check_roll_repeat_attack(success_rate, repeat_count, critical_border) {
      var self = this, success_rate_per_one = nil;

      
      success_rate_per_one = $rb_divide(success_rate, repeat_count).$floor();
      return self.$check_roll(success_rate_per_one, critical_border);
    }, $GardenOrder_check_roll_repeat_attack$3.$$arity = 3);
    
    Opal.def(self, '$check_roll', $GardenOrder_check_roll$4 = function $$check_roll(success_rate, critical_border) {
      var $a, $b, self = this, fumble_border = nil, dice_value = nil, result = nil, text = nil;

      
      if ($truthy($rb_lt(success_rate, 0))) {
        success_rate = 0};
      fumble_border = (function() {if ($truthy($rb_lt(success_rate, 100))) {
        return 96
      } else {
        return 99
      }; return nil; })();
      $b = self.$roll(1, 100), $a = Opal.to_ary($b), (dice_value = ($a[0] == null ? nil : $a[0])), $b;
      result = self.$get_check_result(dice_value, success_rate, critical_border, fumble_border);
      text = "" + "D100<=" + (success_rate) + "@" + (critical_border) + " \uFF1E " + (dice_value) + " \uFF1E " + (result);
      return text;
    }, $GardenOrder_check_roll$4.$$arity = 2);
    
    Opal.def(self, '$get_check_result', $GardenOrder_get_check_result$5 = function $$get_check_result(dice_value, success_rate, critical_border, fumble_border) {
      var self = this;

      
      if ($truthy($rb_le(dice_value, critical_border))) {
        return "\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB"};
      if ($truthy($rb_ge(dice_value, fumble_border))) {
        return "\u30D5\u30A1\u30F3\u30D6\u30EB"};
      if ($truthy($rb_le(dice_value, success_rate))) {
        return "\u6210\u529F"};
      return "\u5931\u6557";
    }, $GardenOrder_get_check_result$5.$$arity = 4);
    
    Opal.def(self, '$look_up_damage_chart', $GardenOrder_look_up_damage_chart$6 = function $$look_up_damage_chart(type, damage_value) {
      var $a, $b, self = this, name = nil, table = nil, row = nil;

      
      $b = self.$get_damage_table_info_by_type(type), $a = Opal.to_ary($b), (name = ($a[0] == null ? nil : $a[0])), (table = ($a[1] == null ? nil : $a[1])), $b;
      row = self.$get_table_by_number(damage_value, table, nil);
      if ($truthy(row['$nil?']())) {
        return nil};
      return "" + "\u8CA0\u50B7\u8868\uFF1A" + (name) + "[" + (damage_value) + "] \uFF1E " + (row['$[]']("damage")) + " \uFF5C " + (row['$[]']("name")) + " \u2026 " + (row['$[]']("text"));
    }, $GardenOrder_look_up_damage_chart$6.$$arity = 2);
    
    Opal.def(self, '$get_damage_table_info_by_type', $GardenOrder_get_damage_table_info_by_type$7 = function $$get_damage_table_info_by_type(type) {
      var self = this, data = nil;

      
      data = $$($nesting, 'DAMAGE_TABLE')['$[]'](type);
      if ($truthy(data['$nil?']())) {
        return nil};
      return [data['$[]']("name"), data['$[]']("table")];
    }, $GardenOrder_get_damage_table_info_by_type$7.$$arity = 1);
    return Opal.const_set($nesting[0], 'DAMAGE_TABLE', $hash2(["SL", "BL", "IM", "BR", "RF", "EL"], {"SL": $hash2(["name", "table"], {"name": "\u5207\u65AD", "table": [[5, $hash2(["name", "text", "damage"], {"name": "\u5207\u308A\u50B7", "text": "\u76AE\u819A\u304C\u5207\u308A\u88C2\u304B\u308C\u308B\u3002", "damage": "\u8EFD\u50B71"})], [10, $hash2(["name", "text", "damage"], {"name": "\u811A\u90E8\u8CA0\u50B7", "text": "\u8DB3\u304C\u5207\u308A\u88C2\u304B\u308C\u3001\u601D\u308F\u305A\u3072\u3056\u307E\u305A\u304F\u3002", "damage": "\u8EFD\u50B7\uFF12\uFF0F\u30DE\u30D2"})], [13, $hash2(["name", "text", "damage"], {"name": "\u51FA\u8840", "text": "\u65AC\u308A\u88C2\u304B\u308C\u305F\u50B7\u304B\u3089\u51FA\u8840\u304C\u7D9A\u304F\u3002", "damage": "\u8EFD\u50B7\uFF13\uFF0F\uFF24\uFF2F\uFF34\uFF1A\u8EFD\u50B71"})], [16, $hash2(["name", "text", "damage"], {"name": "\u80F4\u90E8\u8CA0\u50B7", "text": "\u80F4\u90E8\u306B\u5927\u304D\u306A\u50B7\u3092\u53D7\u3051\u308B\u3002", "damage": "\u8EFD\u50B7\uFF14"})], [19, $hash2(["name", "text", "damage"], {"name": "\u8155\u90E8\u8CA0\u50B7", "text": "\u8155\u306B\u5927\u304D\u306A\u50B7\u3092\u53D7\u3051\u308B\u3002", "damage": "\u91CD\u50B71\uFF0F\uFF24\uFF2F\uFF34\uFF1A\u8EFD\u50B71"})], [22, $hash2(["name", "text", "damage"], {"name": "\u8179\u90E8\u8CA0\u50B7", "text": "\u8179\u90E8\u3092\u6DF1\u304F\u5207\u308A\u88C2\u304B\u308C\u308B\u3002", "damage": "\u91CD\u50B7\uFF12"})], [25, $hash2(["name", "text", "damage"], {"name": "\u5927\u91CF\u51FA\u8840", "text": "\u50B7\u306F\u6DF1\u304F\u3001\u305D\u3053\u304B\u3089\u5927\u91CF\u306B\u51FA\u8840\u3059\u308B\u3002", "damage": "\u91CD\u50B7\uFF12\uFF0F\uFF24\uFF2F\uFF34\uFF1A\u8EFD\u50B7\uFF12"})], [28, $hash2(["name", "text", "damage"], {"name": "\u88C2\u50B7", "text": "\u6CBB\u308A\u306B\u304F\u3044\u50B7\u3092\u3064\u3051\u3089\u308C\u308B\u3002", "damage": "\u91CD\u50B7\uFF13"})], [31, $hash2(["name", "text", "damage"], {"name": "\u8996\u754C\u4E0D\u826F", "text": "\u982D\u90E8\u306B\u53D7\u3051\u305F\u50B7\u304B\u3089\u8840\u304C\u6D41\u308C\u3001\u8996\u754C\u304C\u3075\u3055\u304C\u308C\u308B\u3002", "damage": "\u91CD\u50B7\uFF13\uFF0F\u30B9\u30BF\u30F3"})], [34, $hash2(["name", "text", "damage"], {"name": "\u80F8\u90E8\u8CA0\u50B7", "text": "\u80F8\u304B\u3089\u8170\u306B\u304B\u3051\u3066\u5927\u304D\u304F\u5207\u308A\u88C2\u304B\u308C\u308B\u3002", "damage": "\u81F4\u547D\u50B71"})], [37, $hash2(["name", "text", "damage"], {"name": "\u52D5\u8108\u5207\u65AD", "text": "\u52D5\u8108\u304C\u5207\u308A\u88C2\u304B\u308C\u3001\u5674\u304D\u51FA\u308B\u3088\u3046\u306B\u51FA\u8840\u3059\u308B\u3002", "damage": "\u81F4\u547D\u50B71\uFF0F\uFF24\uFF2F\uFF34\uFF1A\u8EFD\u50B7\uFF13"})], [39, $hash2(["name", "text", "damage"], {"name": "\u80F8\u90E8\u5207\u65AD", "text": "\u50B7\u304C\u80BA\u306B\u307E\u3067\u9054\u3057\u3001\u5580\u8840\u3059\u308B\u3002", "damage": "\u81F4\u547D\u50B7\uFF12"})], [9999, $hash2(["name", "text", "damage"], {"name": "\u810A\u9AC4\u640D\u50B7", "text": "\u810A\u9AC4\u304C\u640D\u50B7\u3059\u308B\u3002", "damage": "\u81F4\u547D\u50B7\uFF12\uFF0F\u653E\u5FC3\u3001\u30B9\u30BF\u30F3\u3001\u30DE\u30D2"})]]}), "BL": $hash2(["name", "table"], {"name": "\u9283\u5F3E", "table": [[5, $hash2(["name", "text", "damage"], {"name": "\u8155\u90E8\u640D\u50B7", "text": "\u9283\u5F3E\u304C\u8155\u3092\u304B\u3059\u3081\u305F\u3002", "damage": "\u8EFD\u50B7\uFF12"})], [10, $hash2(["name", "text", "damage"], {"name": "\u8155\u90E8\u8CAB\u901A", "text": "\u9283\u5F3E\u304C\u8155\u3092\u8CAB\u304F\u3002\u75DB\u307F\u306F\u3042\u308B\u304C\u52D5\u4F5C\u306B\u652F\u969C\u306F\u306A\u3044\u3002", "damage": "\u8EFD\u50B7\uFF13"})], [13, $hash2(["name", "text", "damage"], {"name": "\u80F4\u90E8\u8CA0\u50B7", "text": "\u80F4\u90E8\u306B\u9283\u5F3E\u3092\u304F\u3089\u3046\u3002\u75DB\u307F\u3067\u52D5\u304D\u304C\u920D\u304F\u306A\u308B\u3002", "damage": "\u8EFD\u50B7\uFF14\uFF0F\u30B9\u30ED\u30A6\uFF1A\uFF0D\uFF13"})], [16, $hash2(["name", "text", "damage"], {"name": "\u80A9\u8CA0\u50B7", "text": "\u80A9\u3092\u8CAB\u304B\u308C\u308B\u3002\u9AA8\u304C\u7815\u3051\u305F\u3088\u3046\u3060\u3002", "damage": "\u91CD\u50B71"})], [19, $hash2(["name", "text", "damage"], {"name": "\u8179\u90E8\u8CA0\u50B7", "text": "\u8179\u90E8\u304C\u8CAB\u304B\u308C\u308B\u3002\u304B\u308D\u3046\u3058\u3066\u5185\u81D3\u306B\u30C0\u30E1\u30FC\u30B8\u306F\u306A\u3044\u3088\u3046\u3060\u3002", "damage": "\u91CD\u50B7\uFF12"})], [22, $hash2(["name", "text", "damage"], {"name": "\u811A\u90E8\u8CAB\u901A", "text": "\u811A\u3092\u9283\u5F3E\u306B\u8CAB\u304B\u308C\u3001\u305D\u306E\u5834\u3067\u3072\u3056\u307E\u305A\u304F\u3002", "damage": "\u91CD\u50B7\uFF12\uFF0F\u30DE\u30D2"})], [25, $hash2(["name", "text", "damage"], {"name": "\u6D88\u5316\u5668\u7CFB\u640D\u50B7", "text": "\u80C3\u306A\u3069\u306E\u6D88\u5316\u5668\u5B98\u306B\u30C0\u30E1\u30FC\u30B8\u3092\u53D7\u3051\u308B\u3002", "damage": "\u91CD\u50B7\uFF13"})], [28, $hash2(["name", "text", "damage"], {"name": "\u76F2\u7BA1\u9283\u5F3E", "text": "\u8EAB\u4F53\u306B\u5F3E\u4E38\u304C\u6DF1\u3005\u3068\u523A\u3055\u308B\u3002\u6FC0\u75DB\u304C\u8D70\u308B\u3002", "damage": "\u91CD\u50B7\uFF13\uFF0F\u30B9\u30ED\u30A6\uFF1A\uFF0D5"})], [31, $hash2(["name", "text", "damage"], {"name": "\u5185\u81D3\u640D\u50B7", "text": "\u3044\u304F\u3064\u304B\u306E\u5185\u81D3\u306B\u30C0\u30E1\u30FC\u30B8\u3092\u53D7\u3051\u308B\u3002", "damage": "\u81F4\u547D\u50B71\uFF0F\u30B9\u30BF\u30F3"})], [34, $hash2(["name", "text", "damage"], {"name": "\u80F4\u90E8\u8CAB\u901A", "text": "\u8179\u90E8\u3078\u306E\u653B\u6483\u304C\u8CAB\u901A\u3057\u3001\u51FA\u8840\u3059\u308B\u3002", "damage": "\u81F4\u547D\u50B71\uFF0F\uFF24\uFF2F\uFF34\uFF1A\u8EFD\u50B71"})], [37, $hash2(["name", "text", "damage"], {"name": "\u80F8\u90E8\u8CA0\u50B7", "text": "\u9283\u5F3E\u3067\u80BA\u3092\u8CAB\u304B\u308C\u308B\u3002", "damage": "\u81F4\u547D\u50B7\uFF12"})], [39, $hash2(["name", "text", "damage"], {"name": "\u81F4\u547D\u7684\u306A\u4E00\u6483", "text": "\u9283\u5F3E\u304C\u982D\u90E8\u306B\u547D\u4E2D\u3002\u30B7\u30E7\u30C3\u30AF\u3067\u610F\u8B58\u3092\u98DB\u3070\u3055\u308C\u308B\u3002", "damage": "\u81F4\u547D\u50B7\uFF12\uFF0F\u653E\u5FC3"})], [9999, $hash2(["name", "text", "damage"], {"name": "\u5FC5\u6BBA\u306E\u4E00\u6483", "text": "\u9283\u5F3E\u304C\u5FC3\u81D3\u306E\u8FD1\u304F\u3092\u8CAB\u304F\u3002\u52D5\u8108\u306B\u30C0\u30E1\u30FC\u30B8\u3092\u53D7\u3051\u305F\u3088\u3046\u3060\u3002", "damage": "\u81F4\u547D\u50B7\uFF12\uFF0F\uFF24\uFF2F\uFF34\uFF1A\u91CD\u50B71"})]]}), "IM": $hash2(["name", "table"], {"name": "\u885D\u6483", "table": [[5, $hash2(["name", "text", "damage"], {"name": "\u6253\u64B2", "text": "\u653B\u6483\u3092\u53D7\u3051\u305F\u7B87\u6240\u304C\u3069\u3059\u9ED2\u304F\u816B\u308C\u4E0A\u304C\u308B\u3002", "damage": "\u8EFD\u50B71"})], [10, $hash2(["name", "text", "damage"], {"name": "\u8EE2\u5012", "text": "\u885D\u6483\u3067\u8EE2\u5012\u3059\u308B\u3002", "damage": "\u8EFD\u50B71\uFF0F\u30DE\u30D2"})], [13, $hash2(["name", "text", "damage"], {"name": "\u5E73\u8861\u611F\u899A\u55AA\u5931", "text": "\u885D\u6483\u3067\u4E09\u534A\u898F\u7BA1\u306B\u30C0\u30E1\u30FC\u30B8\u3092\u53D7\u3051\u308B\u3002", "damage": "\u8EFD\u50B7\uFF12\u3001\u75B2\u52B4\uFF12"})], [16, $hash2(["name", "text", "damage"], {"name": "\u30DC\u30C7\u30A3\u30FC\u30D6\u30ED\u30FC", "text": "\u8179\u90E8\u306B\u76F4\u6483\u3002\u75DB\u307F\u304C\u7D99\u7D9A\u3057\u3001\u4F53\u529B\u3092\u596A\u3046\u3002", "damage": "\u8EFD\u50B7\uFF13\uFF0F\uFF24\uFF2F\uFF34\uFF1A\u75B2\u52B4\uFF13"})], [19, $hash2(["name", "text", "damage"], {"name": "\u75DB\u6253", "text": "\u80F4\u90E8\u3084\u811A\u90E8\u306A\u3069\u306B\u6253\u6483\u3092\u53D7\u3051\u308B\u3002", "damage": "\u8EFD\u50B7\uFF14\uFF0F\u30B9\u30BF\u30F3"})], [22, $hash2(["name", "text", "damage"], {"name": "\u982D\u90E8\u75DB\u6253", "text": "\u982D\u90E8\u306B\u30AF\u30EA\u30FC\u30F3\u30D2\u30C3\u30C8\u3002\u610F\u8B58\u304C\u3082\u3046\u308D\u3046\u3068\u3059\u308B\u3002", "damage": "\u8EFD\u50B75\uFF0F\u653E\u5FC3"})], [25, $hash2(["name", "text", "damage"], {"name": "\u811A\u90E8\u9AA8\u6298", "text": "\u653B\u6483\u304C\u8DB3\u306B\u547D\u4E2D\u3057\u3001\u9AA8\u6298\u3059\u308B\u3002", "damage": "\u91CD\u50B71\uFF0F\u30B9\u30ED\u30A6\uFF1A\uFF0D5"})], [28, $hash2(["name", "text", "damage"], {"name": "\u5927\u8EE2\u5012", "text": "\u6FC0\u3057\u3044\u885D\u6483\u306B\u3088\u3063\u3066\u3001\u8CA0\u50B7\u3059\u308B\u3068\u5171\u306B\u5927\u304D\u304F\u4F53\u52E2\u3092\u5D29\u3059\u3002", "damage": "\u91CD\u50B71\uFF0F\u30DE\u30D2\u3001\u30B9\u30BF\u30F3"})], [31, $hash2(["name", "text", "damage"], {"name": "\u8133\u9707\u76EA", "text": "\u8133\u304C\u5927\u304D\u304F\u63FA\u3055\u3076\u3089\u308C\u3001\u610F\u8B58\u304C\u98DB\u3073\u305D\u3046\u306B\u306A\u308B\u3002", "damage": "\u91CD\u50B7\uFF12\uFF0F\u653E\u5FC3"})], [34, $hash2(["name", "text", "damage"], {"name": "\u8907\u96D1\u9AA8\u6298", "text": "\u653B\u6483\u3092\u53D7\u3051\u305F\u90E8\u5206\u304C\u5927\u304D\u304F\u3072\u3057\u3083\u3052\u3001\u8907\u96D1\u9AA8\u6298\u3057\u305F\u3088\u3046\u3060\u3002", "damage": "\u91CD\u50B7\uFF13\uFF0F\u653E\u5FC3\u3001\u30B9\u30BF\u30F3"})], [37, $hash2(["name", "text", "damage"], {"name": "\u982D\u90E8\u88C2\u50B7", "text": "\u982D\u90E8\u306B\u547D\u4E2D\u3002\u76AE\u819A\u304C\u5927\u304D\u304F\u88C2\u3051\u308B\u3002", "damage": "\u81F4\u547D\u50B71\u3001\u75B2\u52B4\uFF13"})], [39, $hash2(["name", "text", "damage"], {"name": "\u808B\u9AA8\u8CA0\u50B7", "text": "\u6298\u308C\u305F\u808B\u9AA8\u304C\u80BA\u306B\u7A81\u304D\u523A\u3055\u308A\u3001\u307E\u3068\u3082\u306B\u547C\u5438\u3092\u884C\u306A\u3046\u3053\u3068\u304C\u3067\u304D\u306A\u3044\u3002", "damage": "\u81F4\u547D\u50B71\uFF0F\u653E\u5FC3\u3001\u30B9\u30BF\u30F3"})], [9999, $hash2(["name", "text", "damage"], {"name": "\u5185\u81D3\u640D\u50B7", "text": "\u885D\u6483\u304C\u8EAB\u4F53\u306E\u82AF\u307E\u3067\u5C4A\u304D\u3001\u5185\u81D3\u304C\u3044\u304F\u3064\u304B\u50B7\u3064\u3044\u305F\u3088\u3046\u3060\u3002", "damage": "\u81F4\u547D\u50B7\uFF12\uFF0F\uFF24\uFF2F\uFF34\uFF1A\u91CD\u50B71"})]]}), "BR": $hash2(["name", "table"], {"name": "\u707C\u71B1", "table": [[5, $hash2(["name", "text", "damage"], {"name": "\u706B\u50B7", "text": "\u76AE\u819A\u306B\u5C0F\u3055\u306A\u706B\u50B7\u3092\u8CA0\u3046\u3002", "damage": "\u8EFD\u50B71"})], [10, $hash2(["name", "text", "damage"], {"name": "\u6E29\u5EA6\u4E0A\u6607", "text": "\u71B1\u306B\u3088\u3063\u3066\u3001\u602A\u6211\u3060\u3051\u3067\u306F\u306A\u304F\u4F53\u529B\u3082\u596A\u308F\u308C\u308B\u3002", "damage": "\u8EFD\u50B7\uFF12\u3001\u75B2\u52B41"})], [13, $hash2(["name", "text", "damage"], {"name": "\u6050\u6016", "text": "\u71C3\u3048\u4E0A\u304C\u308B\u708E\u306B\u6050\u6016\u3092\u611F\u3058\u3001\u8EAB\u4F53\u304C\u3059\u304F\u3093\u3067\u52D5\u304D\u304C\u6B62\u307E\u308B\u3002", "damage": "\u8EFD\u50B7\uFF13\uFF0F\u653E\u5FC3"})], [16, $hash2(["name", "text", "damage"], {"name": "\u767A\u706B", "text": "\u8863\u670D\u3084\u8EAB\u4F53\u306E\u4E00\u90E8\u306B\u706B\u304C\u71C3\u3048\u79FB\u308B\u3002", "damage": "\u8EFD\u50B7\uFF13\uFF0F\uFF24\uFF2F\uFF34\uFF1A\u8EFD\u50B71"})], [19, $hash2(["name", "text", "damage"], {"name": "\u7206\u767A", "text": "\u7206\u767A\u306B\u3088\u308A\u5439\u304D\u98DB\u3070\u3055\u308C\u3001\u8EE2\u5012\u3059\u308B\u3002", "damage": "\u91CD\u50B71\uFF0F\u30DE\u30D2"})], [22, $hash2(["name", "text", "damage"], {"name": "\u5927\u706B\u50B7", "text": "\u75D5\u304C\u6B8B\u308B\u307B\u3069\u306E\u5927\u304D\u306A\u706B\u50B7\u3092\u8CA0\u3046\u3002", "damage": "\u91CD\u50B7\uFF12"})], [25, $hash2(["name", "text", "damage"], {"name": "\u71B1\u6CE2", "text": "\u706B\u50B7\u3068\u5F37\u529B\u306A\u71B1\u306B\u3088\u308A\u610F\u8B58\u304C\u3082\u3046\u308D\u3046\u3068\u3059\u308B\u3002", "damage": "\u91CD\u50B7\uFF12\uFF0F\u30B9\u30BF\u30F3"})], [28, $hash2(["name", "text", "damage"], {"name": "\u5927\u7206\u767A", "text": "\u6FC0\u3057\u3044\u7206\u767A\u3067\u5439\u304D\u98DB\u3070\u3055\u308C\u3001\u30C0\u30E1\u30FC\u30B8\u3068\u5171\u306B\u8EE2\u5012\u3059\u308B\u3002", "damage": "\u91CD\u50B7\uFF13\uFF0F\u30DE\u30D2"})], [31, $hash2(["name", "text", "damage"], {"name": "\u5927\u767A\u706B", "text": "\u5E83\u7BC4\u56F2\u306B\u706B\u304C\u71C3\u3048\u79FB\u308B\u3002", "damage": "\u91CD\u50B7\uFF13\uFF0F\uFF24\uFF2F\uFF34\uFF1A\u8EFD\u50B71"})], [34, $hash2(["name", "text", "damage"], {"name": "\u70AD\u5316", "text": "\u9AD8\u71B1\u306E\u3042\u307E\u308A\u3001\u713C\u3051\u305F\u90E8\u5206\u304C\u70AD\u5316\u3057\u3066\u3057\u307E\u3046\u3002", "damage": "\u81F4\u547D\u50B71"})], [37, $hash2(["name", "text", "damage"], {"name": "\u5185\u81D3\u706B\u50B7", "text": "\u9AD8\u6E29\u306E\u7A7A\u6C17\u3092\u5438\u3044\u8FBC\u3080\u3001\u6C17\u9053\u306B\u3082\u706B\u50B7\u3092\u8CA0\u3063\u3066\u3057\u307E\u3046\u3002", "damage": "\u81F4\u547D\u50B71\uFF0F\uFF24\uFF2F\uFF34\uFF1A\u8EFD\u50B71"})], [39, $hash2(["name", "text", "damage"], {"name": "\u5168\u8EAB\u706B\u50B7", "text": "\u8EAB\u4F53\u306E\u5404\u6240\u306B\u6DF1\u3044\u706B\u50B7\u3092\u8CA0\u3046\u3002", "damage": "\u81F4\u547D\u50B7\uFF12"})], [9999, $hash2(["name", "text", "damage"], {"name": "\u81F4\u547D\u7684\u706B\u50B7", "text": "\u8EAB\u4F53\u306E\u5927\u90E8\u5206\u306B\u713C\u3051\u3069\u3092\u8CA0\u3046\u3002", "damage": "\u81F4\u547D\u50B7\uFF12\uFF0F\u30B9\u30BF\u30F3"})]]}), "RF": $hash2(["name", "table"], {"name": "\u51B7\u5374", "table": [[5, $hash2(["name", "text", "damage"], {"name": "\u51B7\u6C17", "text": "\u8EFD\u3044\u51CD\u50B7\u3092\u53D7\u3051\u308B\u3002", "damage": "\u8EFD\u50B71"})], [10, $hash2(["name", "text", "damage"], {"name": "\u971C\u306E\u8863", "text": "\u8EAB\u4F53\u304C\u8584\u3044\u6C37\u3067\u8986\u308F\u308C\u3001\u52D5\u304D\u304C\u920D\u308B\u3002", "damage": "\u8EFD\u50B71\uFF0F\u75B2\u52B41"})], [13, $hash2(["name", "text", "damage"], {"name": "\u51CD\u50B7", "text": "\u51CD\u50B7\u306B\u3088\u308A\u8EAB\u4F53\u304C\u50B7\u3064\u3051\u3089\u308C\u308B\u3002", "damage": "\u8EFD\u50B7\uFF12"})], [16, $hash2(["name", "text", "damage"], {"name": "\u4F53\u6E29\u4F4E\u4E0B", "text": "\u51B7\u6C17\u306B\u3088\u3063\u3066\u4F53\u6E29\u3092\u596A\u308F\u308C\u308B\u3002", "damage": "\u8EFD\u50B7\uFF13\uFF0F\uFF24\uFF2F\uFF34\uFF1A\u75B2\u52B41"})], [19, $hash2(["name", "text", "damage"], {"name": "\u6C37\u306E\u67B7", "text": "\u8098\u3084\u819D\u306A\u3069\u304C\u6C37\u3067\u8986\u308F\u308C\u3001\u52D5\u304D\u304C\u53D6\u308A\u306B\u304F\u304F\u306A\u308B\u3002", "damage": "\u91CD\u50B71\uFF0F\u30DE\u30D2"})], [22, $hash2(["name", "text", "damage"], {"name": "\u5927\u51CD\u50B7", "text": "\u8EAB\u4F53\u306E\u5404\u6240\u306B\u51CD\u50B7\u3092\u53D7\u3051\u308B\u3002", "damage": "\u91CD\u50B71\uFF0F\uFF24\uFF2F\uFF34\uFF1A\u75B2\u52B4\uFF12"})], [25, $hash2(["name", "text", "damage"], {"name": "\u6C37\u306E\u675F\u7E1B", "text": "\u4E0B\u534A\u8EAB\u304C\u51CD\u308A\u3064\u304D\u3001\u52D5\u304F\u3053\u3068\u304C\u3067\u304D\u306A\u3044\u3002", "damage": "\u91CD\u50B7\uFF12\uFF0F\u30DE\u30D2"})], [28, $hash2(["name", "text", "damage"], {"name": "\u8996\u754C\u4E0D\u826F", "text": "\u982D\u90E8\u306B\u3082\u6C37\u304C\u5F35\u308A\u3001\u8996\u754C\u304C\u3075\u3055\u304C\u308C\u308B\u3002", "damage": "\u91CD\u50B7\uFF12\uFF0F\u30B9\u30BF\u30F3"})], [31, $hash2(["name", "text", "damage"], {"name": "\u8155\u90E8\u51CD\u7D50", "text": "\u8155\u304C\u51CD\u308A\u3065\u3051\u306B\u306A\u308A\u3001\u52D5\u304B\u3059\u3053\u3068\u304C\u3067\u304D\u306A\u3044\u3002", "damage": "\u91CD\u50B7\uFF13\uFF0F\u653E\u5FC3"})], [34, $hash2(["name", "text", "damage"], {"name": "\u91CD\u5EA6\u51CD\u50B7", "text": "\u3055\u3089\u306B\u4F53\u6E29\u304C\u4F4E\u4E0B\u3057\u3001\u6DF1\u523B\u306A\u51CD\u50B7\u3092\u53D7\u3051\u308B\u3002", "damage": "\u81F4\u547D\u50B71"})], [37, $hash2(["name", "text", "damage"], {"name": "\u5168\u8EAB\u51CD\u7D50", "text": "\u5168\u8EAB\u304C\u51CD\u308A\u3065\u3051\u306B\u306A\u308B\u3002", "damage": "\u81F4\u547D\u50B71\uFF0F\uFF24\uFF2F\uFF34\uFF1A\u75B2\u52B4\uFF12"})], [39, $hash2(["name", "text", "damage"], {"name": "\u81F4\u547D\u7684\u51CD\u50B7", "text": "\u8EAB\u4F53\u5168\u8EAB\u306B\u51CD\u50B7\u3092\u53D7\u3051\u308B\u3002", "damage": "\u81F4\u547D\u50B7\uFF12"})], [9999, $hash2(["name", "text", "damage"], {"name": "\u6C37\u306E\u68FA", "text": "\u5B8C\u5168\u306B\u6C37\u306B\u9589\u3058\u8FBC\u3081\u3089\u308C\u308B\u3002", "damage": "\u81F4\u547D\u50B7\uFF12\uFF0F\u30B9\u30BF\u30F3\u3001\u30DE\u30D2"})]]}), "EL": $hash2(["name", "table"], {"name": "\u96FB\u6483", "table": [[5, $hash2(["name", "text", "damage"], {"name": "\u9759\u96FB\u6C17", "text": "\u5168\u8EAB\u306E\u6BDB\u304C\u9006\u7ACB\u3064\u3002", "damage": "\u75B2\u52B4\uFF13"})], [10, $hash2(["name", "text", "damage"], {"name": "\u96FB\u71B1\u50B7", "text": "\u96FB\u6D41\u306B\u3088\u3063\u3066\u50B7\u3064\u304F\u3002", "damage": "\u75B2\u52B41\u3001\u8EFD\u50B71"})], [13, $hash2(["name", "text", "damage"], {"name": "\u611F\u96FB", "text": "\u96FB\u6D41\u3067\u50B7\u3064\u304F\u3068\u5171\u306B\u3001\u8EAB\u4F53\u304C\u8EFD\u304F\u3057\u3073\u308C\u308B\u3002", "damage": "\u75B2\u52B4\uFF12\u3001\u8EFD\u50B7\uFF12"})], [16, $hash2(["name", "text", "damage"], {"name": "\u9583\u5149", "text": "\u6FC0\u3057\u3044\u96FB\u5149\u306B\u3088\u308A\u3001\u4E00\u6642\u7684\u306B\u8996\u754C\u304C\u3075\u3055\u304C\u308C\u308B\u3002", "damage": "\u8EFD\u50B7\uFF13\uFF0F\u30B9\u30BF\u30F3"})], [19, $hash2(["name", "text", "damage"], {"name": "\u811A\u90E8\u611F\u96FB", "text": "\u96FB\u6D41\u306B\u3088\u308A\u811A\u304C\u3057\u3073\u308C\u3001\u52D5\u3051\u306A\u304F\u306A\u308B\u3002", "damage": "\u91CD\u50B71\uFF0F\u30DE\u30D2"})], [22, $hash2(["name", "text", "damage"], {"name": "\u5927\u96FB\u71B1\u50B7", "text": "\u8EAB\u4F53\u306E\u5404\u6240\u304C\u96FB\u6D41\u306B\u3088\u3063\u3066\u50B7\u3064\u304F\u3002", "damage": "\u75B2\u52B4\uFF12\u3001\u91CD\u50B7\uFF12"})], [25, $hash2(["name", "text", "damage"], {"name": "\u8155\u90E8\u8CA0\u50B7", "text": "\u96FB\u6D41\u3067\u8155\u304C\u3057\u3073\u308C\u3001\u52D5\u3051\u306A\u304F\u306A\u308B\u3002", "damage": "\u8EFD\u50B71\u3001\u91CD\u50B7\uFF12\uFF0F\u653E\u5FC3"})], [28, $hash2(["name", "text", "damage"], {"name": "\u5927\u611F\u96FB", "text": "\u96FB\u6D41\u306B\u3088\u3063\u3066\u8EAB\u4F53\u4E2D\u304C\u3057\u3073\u308C\u3001\u52D5\u3051\u306A\u304F\u306A\u308B\u3002", "damage": "\u91CD\u50B7\uFF12\uFF0F\u30B9\u30BF\u30F3\u3001\u30DE\u30D2"})], [31, $hash2(["name", "text", "damage"], {"name": "\u4E00\u6642\u5FC3\u505C\u6B62", "text": "\u5F37\u529B\u306A\u96FB\u6483\u306E\u30B7\u30E7\u30C3\u30AF\u306B\u3088\u308A\u3001\u5FC3\u81D3\u304C\u307B\u3093\u306E\u4E00\u77AC\u3060\u3051\u6B62\u307E\u308B\u3002", "damage": "\u75B2\u52B4\uFF13\u3001\u91CD\u50B7\uFF13"})], [34, $hash2(["name", "text", "damage"], {"name": "\u5927\u96FB\u6D41", "text": "\u5168\u8EAB\u306B\u96FB\u6D41\u304C\u99C6\u3051\u5DE1\u308B\u3002", "damage": "\u91CD\u50B7\uFF13\uFF0F\u653E\u5FC3\u3001\u30DE\u30D2"})], [37, $hash2(["name", "text", "damage"], {"name": "\u81F4\u547D\u96FB\u71B1\u50B7", "text": "\u5168\u8EAB\u304C\u96FB\u6D41\u306B\u3088\u3063\u3066\u50B7\u3064\u304F\u3002", "damage": "\u91CD\u50B71\u3001\u81F4\u547D\u50B71"})], [39, $hash2(["name", "text", "damage"], {"name": "\u5FC3\u505C\u6B62", "text": "\u5F37\u529B\u306A\u96FB\u6483\u306E\u30B7\u30E7\u30C3\u30AF\u306B\u3088\u308A\u3001\u5FC3\u81D3\u304C\u4E00\u6642\u7684\u306B\u6B62\u307E\u308B\u3002\u6B7B\u306E\u6DF5\u304C\u898B\u3048\u308B\u3002", "damage": "\u75B2\u52B4\uFF13\u3001\u91CD\u50B71\u3001\u81F4\u547D\u50B71"})], [9999, $hash2(["name", "text", "damage"], {"name": "\u7D44\u7E54\u70AD\u5316", "text": "\u5168\u8EAB\u304C\u96FB\u6D41\u3067\u713C\u304B\u308C\u3001\u3042\u3061\u3053\u3061\u306E\u7D44\u7E54\u304C\u70AD\u5316\u3059\u308B\u3002", "damage": "\u81F4\u547D\u50B7\uFF12\uFF0F\u30B9\u30BF\u30F3"})]]})}).$freeze());
  })($nesting[0], $$($nesting, 'DiceBot'), $nesting)
})(Opal);
Opal.loaded(["diceBot/GardenOrder.js"]);
/* Generated by Opal 1.0.3 */
(function(Opal) {
  var self = Opal.top, $nesting = [], nil = Opal.nil, $$$ = Opal.const_get_qualified, $$ = Opal.const_get_relative, $breaker = Opal.breaker, $slice = Opal.slice, $klass = Opal.klass, $truthy = Opal.truthy;

  Opal.add_stubs(['$require', '$setPrefixes', '$===', '$to_i', '$last_match', '$get_critical_border', '$check_roll_repeat_attack', '$look_up_damage_chart']);
  
  self.$require("diceBot/GardenOrder");
  return (function($base, $super, $parent_nesting) {
    var self = $klass($base, $super, 'AceKillerGene');

    var $nesting = [self].concat($parent_nesting), $AceKillerGene_rollDiceCommand$1;

    
    Opal.const_set($nesting[0], 'ID', "AceKillerGene");
    Opal.const_set($nesting[0], 'NAME', "\u30A8\u30FC\u30B9\u30AD\u30E9\u30FC\u30B8\u30FC\u30F3");
    Opal.const_set($nesting[0], 'SORT_KEY', "\u3048\u3048\u3059\u304D\u3089\u3042\u3057\u3044\u3093");
    Opal.const_set($nesting[0], 'HELP_MESSAGE', "" + "\u30FB\u57FA\u672C\u5224\u5B9A\n" + "\u3000AKx/y@z\u3000x\uFF1A\u6210\u529F\u7387\u3001y\uFF1A\u9023\u7D9A\u653B\u6483\u56DE\u6570\uFF08\u7701\u7565\u53EF\uFF09\u3001z\uFF1A\u30AF\u30EA\u30C6\u30A3\u30AB\u30EB\u5024\uFF08\u7701\u7565\u53EF\uFF09\n" + "\u3000\uFF08\u9023\u7D9A\u653B\u6483\u3067\u306F1\u56DE\u306E\u5224\u5B9A\u306E\u307F\u304C\u5B9F\u65BD\u3055\u308C\u307E\u3059\uFF09\n" + "\u3000\u4F8B\uFF09AK55\u3000AK100/2\u3000AK70@10\u3000AK155/3@44\n" + "\u30FB\u8CA0\u50B7\u8868\n" + "\u3000DCxxy\n" + "\u3000xx\uFF1A\u5C5E\u6027\uFF08\u5207\u65AD\uFF1ASL\uFF0C\u9283\u5F3E\uFF1ABL\uFF0C\u885D\u6483\uFF1AIM\uFF0C\u707C\u71B1\uFF1ABR\uFF0C\u51B7\u5374\uFF1ARF\uFF0C\u96FB\u6483\uFF1AEL\uFF09\n" + "\u3000y\uFF1A\u30C0\u30E1\u30FC\u30B8\n" + "\u3000\u4F8B\uFF09DCSL7\u3000DCEL22\n");
    self.$setPrefixes(["(AK|AKG)(\\-?\\d+)(\\/\\d+)?(@\\d+)?", "DC(SL|BL|IM|BR|RF|EL).+"]);
    return (Opal.def(self, '$rollDiceCommand', $AceKillerGene_rollDiceCommand$1 = function $$rollDiceCommand(command) {
      var $a, self = this, $case = nil, success_rate = nil, repeat_count = nil, critical_border_text = nil, critical_border = nil, type = nil, damage_value = nil;

      
      $case = command;
      if (/(AK|AKG)(\-?\d+)(\/(\d+))?(@(\d+))?/i['$===']($case)) {
      success_rate = $$($nesting, 'Regexp').$last_match(2).$to_i();
      repeat_count = ($truthy($a = $$($nesting, 'Regexp').$last_match(4)) ? $a : 1).$to_i();
      critical_border_text = $$($nesting, 'Regexp').$last_match(6);
      critical_border = self.$get_critical_border(critical_border_text, success_rate);
      return self.$check_roll_repeat_attack(success_rate, repeat_count, critical_border);}
      else if (/^DC(SL|BL|IM|BR|RF|EL)(\d+)/i['$===']($case)) {
      type = $$($nesting, 'Regexp').$last_match(1);
      damage_value = $$($nesting, 'Regexp').$last_match(2).$to_i();
      return self.$look_up_damage_chart(type, damage_value);};
      return nil;
    }, $AceKillerGene_rollDiceCommand$1.$$arity = 1), nil) && 'rollDiceCommand';
  })($nesting[0], $$($nesting, 'GardenOrder'), $nesting);
})(Opal);
